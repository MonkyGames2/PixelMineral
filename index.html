<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Juego de Miner√≠a ‚Äì Preview ChatGPT</title>
<style>
 body { background:#1b1b1b; color:#fff; font-family:monospace; text-align:center; }
 h2 { font-size:32px; }
 canvas { background:#2a2a2a; border:4px solid #777; margin-top:10px; image-rendering: pixelated; }
 button { margin:6px; padding:10px 18px; font-family:monospace; font-size:18px; background:#444; color:#fff; border:2px solid #999; cursor:pointer; }
 button:hover { background:#666; }
</style>
</head>
<body>
<h2>‚õèÔ∏è Juego de Miner√≠a ‚Äì Preview</h2>
<canvas id="game" width="800" height="600"></canvas><br>
<button id="mineBtn">‚õèÔ∏è MINAR</button>
<button onclick="togglePickShop()">üõí TIENDA PICOS</button>
<button onclick="toggleEnchantShop()">‚ú® ENCANTAMIENTOS</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
ctx.font = "20px monospace";

const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function beep(freq,dur=0.05){ const o=audioCtx.createOscillator(); const g=audioCtx.createGain(); o.type='square'; o.frequency.value=freq; o.connect(g); g.connect(audioCtx.destination); g.gain.value=0.05; o.start(); o.stop(audioCtx.currentTime+dur); }
function playBuy(){beep(700,0.1)}

let plata=0;
let showPickShop=false, showEnchantShop=false;
let hoverPick=-1, hoverEnchant=-1;

const minerals=[
 {name:"Tierra",value:1,weight:100,color:"#8b5a2b",hp:68,stars:1},
 {name:"Piedra",value:2,weight:90,color:"#777",hp:136,stars:1},
 {name:"Carb√≥n",value:5,weight:80,color:"#111",hp:200,stars:2},
 {name:"Cobre",value:8,weight:70,color:"#c46b32",hp:240,stars:2},
 {name:"Hierro",value:10,weight:60,color:"#aaa",hp:272,stars:3},
 {name:"Plata",value:15,weight:40,color:"#ddd",hp:360,stars:3},
 {name:"Oro",value:20,weight:30,color:"#ffd700",hp:400,stars:4},
 {name:"Esmeralda",value:35,weight:20,color:"#00ff99",hp:420,stars:4},
 {name:"Rub√≠",value:45,weight:15,color:"#cc0000",hp:460,stars:4},
 {name:"Zafiro",value:42,weight:15,color:"#0044ff",hp:450,stars:4},
 {name:"Amatista",value:30,weight:25,color:"#9966ff",hp:380,stars:3},
 {name:"Topacio",value:40,weight:18,color:"#ffcc66",hp:430,stars:4},
 {name:"Diamante",value:60,weight:5,color:"#0ff",hp:640,stars:5},
 {name:"Obsidiana",value:55,weight:10,color:"#220022",hp:800,stars:4},
 {name:"Netherite",value:80,weight:3,color:"#3a0f0f",hp:880,stars:5},
 {name:"Titanio",value:70,weight:8,color:"#8899aa",hp:700,stars:5},
 {name:"Uranio",value:90,weight:4,color:"#66ff00",hp:900,stars:5},
 {name:"Mithril",value:120,weight:2,color:"#66ffff",hp:1200,stars:6},
 {name:"Adamantita",value:150,weight:1.5,color:"#ff4444",hp:1400,stars:6},
 {name:"Huevo de Drag√≥n",value:200,weight:1,color:"#b000b0",hp:1600,stars:6},

 // minerales reincorporados
 {name:"Cuarzo",value:18,weight:35,color:"#eeeeff",hp:350,stars:3},
 {name:"Basalto",value:22,weight:28,color:"#2b2b2b",hp:420,stars:3},
 {name:"Granito",value:24,weight:26,color:"#8a6f5a",hp:450,stars:3},
 {name:"Caliza",value:20,weight:30,color:"#d6d0b8",hp:400,stars:2},
 {name:"√ìnix",value:50,weight:12,color:"#050505",hp:520,stars:4},
 {name:"Cobalto",value:65,weight:9,color:"#004488",hp:620,stars:5},
 {name:"N√≠quel",value:28,weight:24,color:"#9fa3a6",hp:460,stars:3},
 {name:"Plomo",value:32,weight:22,color:"#555577",hp:480,stars:3},
 {name:"Azufre",value:26,weight:25,color:"#ffff66",hp:420,stars:2},
 {name:"Bauxita",value:34,weight:20,color:"#cc7755",hp:500,stars:3},
 {name:"Lapis",value:38,weight:18,color:"#0033cc",hp:520,stars:4},
 {name:"Jade",value:48,weight:14,color:"#00aa66",hp:560,stars:4},
 {name:"Opalo",value:58,weight:10,color:"#99ffff",hp:600,stars:4},
 {name:"Perla",value:72,weight:6,color:"#f5f5f5",hp:680,stars:5},
 {name:"Cristal Antiguo",value:110,weight:2.5,color:"#ccffff",hp:1000,stars:6}
];

const discovered = new Set();

const picks=[
 {name:"Pico de Madera",cost:0,base:50,damage:5},
 {name:"Pico de Piedra",cost:50,base:150,damage:8},
 {name:"Pico de Cobre",cost:150,base:330,damage:12},
 {name:"Pico de Hierro",cost:400,base:450,damage:18},
 {name:"Pico de Oro",cost:800,base:300,damage:25},
 {name:"Pico de Diamante",cost:1600,base:1350,damage:40},
 {name:"Pico de Obsidiana",cost:2600,base:1750,damage:55},
 {name:"Pico de Mithril",cost:4200,base:2350,damage:75},
 {name:"Pico Legendario",cost:8000,base:4150,damage:120}
];

let pick={...picks[0],dur:picks[0].base,ench:{ef:0,dur:0,for:0}};
let currentBlock={...minerals[1]};
let blockHP=currentBlock.hp;

function weightedRandom(){
 let total=minerals.reduce((a,b)=>a+b.weight,0);
 let r=Math.random()*total;
 for(let m of minerals){if(r<m.weight)return {...m}; r-=m.weight}
 return {...minerals[0]};
}

function mine(){
 if(pick.dur<=0)return;
 beep(400);
 pick.dur--;
 blockHP-= pick.damage*(1+pick.ench.ef*0.5);
 if(blockHP<=0) breakBlock();
 draw();
}

function breakBlock(){
 beep(120,0.1);
 plata+=currentBlock.value*(1+pick.ench.for);
 discovered.add(currentBlock.name);
 currentBlock=weightedRandom();
 blockHP=currentBlock.hp;
}

function togglePickShop(){showPickShop=!showPickShop;showEnchantShop=false;draw()}
function toggleEnchantShop(){showEnchantShop=!showEnchantShop;showPickShop=false;draw()}

let miningInterval=null;
const mineBtn=document.getElementById('mineBtn');
mineBtn.addEventListener('click',()=>{mine()});
mineBtn.addEventListener('mousedown',()=>{if(miningInterval)clearInterval(miningInterval);miningInterval=setInterval(()=>{mine()},120);});
mineBtn.addEventListener('mouseup',()=>{if(miningInterval)clearInterval(miningInterval);miningInterval=null});
mineBtn.addEventListener('mouseleave',()=>{if(miningInterval)clearInterval(miningInterval);miningInterval=null});

function draw(){
 ctx.clearRect(0,0,800,600);

 // contador descubiertos (arriba derecha)
 ctx.fillStyle="#fff";
 ctx.fillText(`${discovered.size}/${minerals.length} minerales`,580,25);

 // bloque
 ctx.fillStyle=currentBlock.color;
 ctx.fillRect(330,220,140,140);

 // vida bloque
 let hp=blockHP/currentBlock.hp;
 ctx.fillStyle="#f00";ctx.fillRect(330,200,140,10);
 ctx.fillStyle="#0f0";ctx.fillRect(330,200,140*hp,10);

 // stats jugador (arriba izquierda)
 ctx.fillStyle=(pick.dur<=0)?"#f00":"#fff";
 ctx.fillText("Plata: "+plata,20,30);
 ctx.fillText(pick.name+" | Dur: "+pick.dur,20,55);
 ctx.fillText(`Ef:${pick.ench.ef} Dur:${pick.ench.dur} For:${pick.ench.for}`,20,80);

 // nombre bloque
 ctx.fillStyle="#fff";
 ctx.fillText("Bloque: "+currentBlock.name,320,390);

 // estrellas alineadas bajo el nombre
 ctx.fillText("‚òÖ".repeat(currentBlock.stars),320,415);

 if(showPickShop){ctx.fillText("TIENDA DE PICOS",20,130); picks.forEach((p,i)=>{if(i===hoverPick){ctx.fillStyle="#0088ff";ctx.fillRect(15,145+i*26,360,24)}ctx.fillStyle="#fff";ctx.fillText(p.name+" $"+p.cost,20,165+i*26)})}
 if(showEnchantShop){ctx.fillText("ENCANTAMIENTOS",20,130); [{n:"Eficiencia",c:300},{n:"Durabilidad",c:50},{n:"Fortuna",c:400}].forEach((e,i)=>{if(i===hoverEnchant){ctx.fillStyle="#0088ff";ctx.fillRect(15,145+i*30,360,26)}ctx.fillStyle="#fff";ctx.fillText(e.n+" $"+e.c,20,165+i*30)})}
}

canvas.addEventListener('mousemove',e=>{ hoverPick=showPickShop?Math.floor((e.offsetY-145)/26):-1; hoverEnchant=showEnchantShop?Math.floor((e.offsetY-145)/30):-1; draw(); });
canvas.addEventListener('click',()=>{
 if(showPickShop && hoverPick>=0 && hoverPick<picks.length){let p=picks[hoverPick];if(plata>=p.cost){plata-=p.cost;playBuy();pick={...p,dur:p.base,ench:{ef:0,dur:0,for:0}}}}
 if(showEnchantShop && hoverEnchant>=0){const enchCosts=[300,50,400];if(plata>=enchCosts[hoverEnchant]){plata-=enchCosts[hoverEnchant];playBuy();if(hoverEnchant===0)pick.ench.ef++; if(hoverEnchant===1){pick.ench.dur++;pick.dur+=100;} if(hoverEnchant===2)pick.ench.for++;}}
});

draw();
</script>
</body>
</html>
